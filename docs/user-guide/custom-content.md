# Custom Content

`swcat` can display custom information on entity detail pages based on
entity annotations. This is useful for integrating external data or displaying
specific metadata that does not fit into the standard catalog schema. This is also
the primary way to visualize data generated by [Sidecar Extensions](sidecar-extensions.md).

## How it works

You can configure `swcat` to look for specific annotations on your entities and
render their values as dedicated cards in the user interface.

### 1. Configure swcat.yml

In your `swcat.yml`, use the `ui.annotationBasedContent` section to define which
annotations should be rendered and how. You can optionally specify a `rank`
to control the display order (lower ranks appear first).

```yaml
ui:
  annotationBasedContent:
    # Key is the annotation name
    my-org.com/data:
      heading: Organization Data
      style: attrs  # text | list | json | attrs | table
      rank: 10      # Optional: Lower ranks appear first.
```

### 2. Annotate your entities

Add the corresponding annotation to your entity metadata.

```yaml
apiVersion: swcat.dnswlt.me/v1alpha1
kind: Component
metadata:
  name: my-service
  annotations:
    my-org.com/data: |
      {
        "team": "Alpha",
        "cost-center": "12345",
        "criticality": "high"
      }
spec:
  type: service
```

!!! note
    From the YAML parser's perspective, the annotation value is just a string.
    If you use a structured style like `list`, `json`, `attrs` or `table`, `swcat` will
    attempt to parse that string as JSON. This approach ensures compatibility
    with Kubernetes CRDs and the Backstage software catalog format, where
    annotations are strictly key-value pairs of strings.

## Supported Styles

The `style` property determines how the annotation value is parsed and displayed:

| Style | Description | Expected Value Format |
| :--- | :--- | :--- |
| `text` | Renders the value as plain text. | Any string. |
| `list` | Renders a bulleted list. | A JSON array of strings: `["item1", "item2"]` |
| `json` | Renders a formatted code block with syntax highlighting. | Any valid JSON object or array. |
| `attrs` | Renders a key-value table. | A simple JSON object: `{"key": "value"}` |
| `table` | Renders a table with custom columns. | A JSON array of objects: `[{"a": 1}, {"a": 2}]` |

### Custom Tables

The `table` style allows you to define a custom table structure.
You must provide a `columns` list in the configuration,
where each column has a `header` and a `data` template.
The `data` template is a Go template that is executed for each item in the list.

**Configuration example (`swcat.yml`):**

```yaml
ui:
  annotationBasedContent:
    asyncapi.com/channels:
      heading: AsyncAPI Channels
      style: table
      columns:
        - header: Topic
          data: {{ .address }}
        - header: Messages
          # You can use the 'join' helper to format string lists
          data: {{ .messages | join }}
```

**Annotation example:**

```yaml
metadata:
  annotations:
    asyncapi.com/channels: |
      [
        {
          "address": "users/signup",
          "messages": ["UserSignedUp"]
        },
        {
          "address": "users/login",
          "messages": ["UserLoggedIn", "UserLoginFailed"]
        }
      ]
```
