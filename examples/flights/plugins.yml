plugins:
  asyncApiImporter:
    kind: AsyncAPIImporterPlugin
    trigger: |-
      kind:API AND type~'^kafka/'
    inhibit: |-
      annotation='swcat/visibility=internal'
    spec:
      providerPlugin: mavenAsyncApiProvider
      targetAnnotation: swcat/asyncapi

  mavenAsyncApiProvider:
    kind: ExternalPlugin
    # No trigger - this plugin is only used by the asyncApiImporter plugin
    spec:
      command: java
      args: 
        - '-jar'
        - extensions/maven/target/artifact-extractor-1.0-SNAPSHOT.jar
      verbose: true
      config:
        defaultGroupId: com.example.swcat
        defaultPackaging: jar
        includeSnapshots: false
        file: META-INF/MANIFEST.MF
